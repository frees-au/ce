<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
    <meta charset="utf-8" />
<noscript><style>form.antibot * :not(.antibot-message) { display: none !important; }</style>
</noscript><link rel="canonical" href="https://frees.au/ce/ummm/mastering-machine-names-inside-your-views" />
<meta name="Generator" content="Drupal 10 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="/themes/custom/fstheme/favicon.ico" type="image/vnd.microsoft.icon" />

    <title>Mastering machine names inside your views | frees.au/ce</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cutive+Mono&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">    <link rel="stylesheet" media="all" href="/sites/default/files/css/css_BKpyBciB5hb0PRJU1ZA0wkK33oeEWthdq7gfgpM4VHs.css?delta=0&amp;language=en&amp;theme=fstheme&amp;include=eJwrriwuSc3VT0osTtVJKy7JSM1N1U_PyU9KzNFNLi7WySosTS2qjC_NjE8sLclPzs8tyEktSdVH5gAAZyMaWQ" />
<link rel="stylesheet" media="all" href="/sites/default/files/css/css_eYQHsHd2nc_KQivrYztSq3ltSay04uYyjxWAfoWs1cg.css?delta=1&amp;language=en&amp;theme=fstheme&amp;include=eJwrriwuSc3VT0osTtVJKy7JSM1N1U_PyU9KzNFNLi7WySosTS2qjC_NjE8sLclPzs8tyEktSdVH5gAAZyMaWQ" />

    
  </head>
  <body class="font-sans font-normal">
    <div class="site-layout-frame pt-2 md:pt-4 lg:pt-8">
            <a href="#main-content" class="visually-hidden focusable">
        Skip to main content
      </a>
      
        <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div class="site-layout">
  <header role="banner" class="layout-banner p-4 md:p-8">
    <!-- Todo logo convert to component -->
    <div class="flex flex-row justify-between items-center md:flex-none">
      <a class="fs-toggle-menu block md:hidden">
        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><path d="M 0 7.5 L 0 12.5 L 50 12.5 L 50 7.5 Z M 0 22.5 L 0 27.5 L 50 27.5 L 50 22.5 Z M 0 37.5 L 0 42.5 L 50 42.5 L 50 37.5 Z"/></svg>
      </a>
      <img class="w-[8rem] md:w-full md:max-w-[14rem] lg:w-full lg:max-w-full" src="/themes/custom/fstheme/logo.png">
    </div>
    
  </header>

  <aside role="nav" class="
    layout-nav opacity-0 hidden
    text-2xl [&_li]:mb-4 mb-4 font-semibold
    md:animate-none md:opacity-100 md:block p-4 md:p-8 md:text-lg
    lg:text-xl
    ">
      <div>
    <nav role="navigation" aria-labelledby="block-fstheme-mainnav-menu" id="block-fstheme-mainnav">
            
  <h2 class="visually-hidden" id="block-fstheme-mainnav-menu">Main navigation</h2>
  

        
              <ul>
              <li>
        <a href="/ce/thank-you" data-drupal-link-system-path="node/3">Back to front</a>
              </li>
          <li>
        <a href="/ce/from-the-pen" data-drupal-link-system-path="ce/from-the-pen">From the pen</a>
              </li>
          <li>
        <a href="/ce/free-as-in-speech" data-drupal-link-system-path="webform/contact">Throw some shade</a>
              </li>
        </ul>
  


  </nav>

  </div>

  </aside>

  <div class="layout-title p-4 md:p-8">
      <div>
    <div id="block-fstheme-page-title">
  
    
      


  <h1 class="text-6xl font-mono font-extrabold">
      Mastering machine names inside your views
  </h1>


  </div>

  </div>

  </div>

  <main class="layout-main p-4 md:p-8">
    
      <div>
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>

    
    <a id="main-content" tabindex="-1"></a>    
      <div>
    <div id="block-fstheme-content">
  
    
      <article class="prose prose-zinc text-md md:prose-md lg:prose-lg lg:prose-pre:text-2xl">

  
    <div>
      <span class="prose-2xl [&>p]:!mt-0">
        
      <p>Drupal views providers an advanced UI, but sometimes the auto-generated machine names within your views are not ideal. There are ways to improve this.</p>
  
      </span>
      
      <p><strong>This site is under development and this article is not complete.</strong></p><p>I have been creating some content for the new website and thinking about random tips that I have never found time to share.</p><p>When you create a view there are a few areas where I like to control generated "machine name" values that will lead to cleaner output in the long run.</p><p>I wouldn't do this after a site is built, it's too risky to overlook other things that depend on these machine names. I would only use these techniques when I initially create the view.</p><h2>The view itself</h2><p>It's common to find that your view wasn't named well, and you're unhappy with the name of the twig file to override.</p><p>The easiest way to fix this is to clone the view and customise the machine as you do it, then delete the old view. This is completely safe as views YAML is usually self-contained.</p><p>As said above, you usually do this when you are building the view and you realise you gave it a bad name. After a while there are other parts of your site which will be couple to this name, and easy to miss. If you clone a view and change the machine name you <strong>will</strong> break the following and plenty of other things:</p><ul><li>Entity reference fields (when you configure the options list) can use a View.</li><li>Your layouts builder page, where you have embedded a Views block.</li><li>Your block layout, where you have added a Views block.</li><li>Twig templates reference the Views machine name</li><li>Custom code can programmatically load and render a view.</li><li>Probably a dozen more if you count your contrib module.&nbsp;</li></ul><h2>Display names</h2><p>Below we have a view with multiple displays and they have been neatly named. If you want to control the twig for this view, you can add a template views-view--VIEWNAME--DISPLAYNAME.html.twig. After a site has been built it's common to see templates like this:</p><p>[PICTURE]</p><pre><code class="language-plaintext">views-view--mycontentview--page-1.html.twig
views-view--mycontentview--page-2.html.twig
views-view--mycontentview--page-3.html.twig</code></pre><p>For another developer looking at this code, and trawling through dozens of templates, it's not immediately clear what these views are being used for. This is a DX issue for you and your colleagues. The effort to change this later may not be worth it.</p><p>Get into the habit of setting your display machine names as soon as you create them. You will appreciate the resulting systax for creating your twig templates.</p><p>[PICTURE]</p><pre><code class="language-plaintext">views-view--mycontentview--all.html.twig
views-view--mycontentview--articles.html.twig
views-view--mycontentview--newest-articles.html.twig</code></pre><h2>Renaming fields</h2><p>When adding fields, it's common to add the same field twice, you might render a field in different ways or hide one of the fields and use it in a field rewrite later.</p><p>The views UI does not allow you to rename the field's machine name. However there is a technique I've been using for a while that works very well. It will allow you to have well named twig tokens. It invokes hacking the views yaml and reimporting it.</p><p>Let's say we want to re-use a <strong>uid</strong> (User ID) field, hide it and, reuse it in a field rewrite in another field.</p><ol><li>Create your view, and add your fields.</li><li>Create a second UID field.</li><li>Add a "Global: custom text" field</li><li>In the rewrite of this field, you will note that to express this field you will enter {{ uid_2 }} - How can we change this.</li><li>Export your site config with Drush, open the new view yaml, and find and replace the instances of <strong>uid_2</strong> with <strong>you_say_tomatoe</strong></li><li>Reimport your site config</li></ol><p>Now in your view you can use {{ you_say_tomatoe }} in your rewriting.</p><p><strong>Disclaimer #1</strong>: I've been told that I hack yaml too much. I like to explore the boundaries of Drupal's config system, it's a masterpiece. However, I'm also aware that I will get no love in the issue queue if I hose my site. That said, I have been using this technique with Views since Drupal 8 and it has never failed me.</p><p><strong>Disclaimers #2</strong>: I only do fancy twig re-writing in administration views in the backend, especially when I'm using a vanilla uncustomised backend theme. It's a great smart way to make backend tables more user-friendly. On the frontend, you should bring this complexity into the theme layer and keep your views nice and sane.</p><p>[VIDEO]</p><p>&nbsp;</p>
    <div>
    <div>Tags</div>
  </div>

      <div class="field-multiple"><a href="/taxonomy/term/2" hreflang="en">Site Building</a></div>
      <div class="field-multiple"><a href="/taxonomy/term/1" hreflang="en">Testing</a></div>
  
    </div>
  
</article>

  </div>

  </div>

    
  </main>

  <footer class="layout-footer">
      <div>
    <div id="block-fstheme-searchform">
  
    
      <form action="/js-search/lunr/content">
  <div class="search-api-lunr-form">
    <div class="form-item">
      <label>Search</label>
      <input name="q" class="search-api-lunr-form__input search-api-lunr-autocomplete" type="text" placeholder="Search" data-server="lunr" data-index="content">
    </div>
    <input type="submit" value="Search">
  </div>
</form>

  </div>

  </div>

  </footer>
</div>

  </div>

      
    </div>
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","pathPrefix":"","currentPath":"node\/5","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"search_api_lunr":{"servers":{"lunr":{"indexes":{"content":{"fileList":["https:\/\/frees.au\/sites\/default\/files\/search-api-js\/lunr\/content\/index-2.json","https:\/\/frees.au\/sites\/default\/files\/search-api-js\/lunr\/content\/index-3.json","https:\/\/frees.au\/sites\/default\/files\/search-api-js\/lunr\/content\/index-4.json"],"fields":{"lead":{"boost":1,"special_type":"summary"},"node_grants":{"boost":1},"status":{"boost":1},"title":{"boost":21,"special_type":"label"},"uid":{"boost":1},"url":{"boost":1,"special_type":"url"}},"version":3}}}}},"user":{"uid":0,"permissionsHash":"1c28466450f30b65aa18d501fbd1350699f8fd43d7ab7360ae60c0603f52a1da"}}</script>
<script src="/sites/default/files/js/js_gxL1OA2zjH6IWQ0eHg1irs5PAnZ33Mo3PcC5adtM51Y.js?scope=footer&amp;delta=0&amp;language=en&amp;theme=fstheme&amp;include=eJxLKy7JSM1N1U_PyU9KzNHNKtYpTk0sSs6ITyzIjM8pzSvSh_ABPnMPlw"></script>
<script src="/modules/contrib/search_api_lunr/js/build/api.index.js?sl1e0m" type="module"></script>
<script src="/modules/contrib/search_api_lunr/js/build/theme.index.js?sl1e0m" type="module"></script>
<script src="/sites/default/files/js/js_HgzT0GZx5EmqOWghesoKKQ1b-S4gDQ9Io56zAqgkR0c.js?scope=footer&amp;delta=3&amp;language=en&amp;theme=fstheme&amp;include=eJxLKy7JSM1N1U_PyU9KzNHNKtYpTk0sSs6ITyzIjM8pzSvSh_ABPnMPlw"></script>
<script src="/modules/contrib/search_api_lunr/js/build/search.index.js?sl1e0m" type="module"></script>

  </body>
</html>
